{% extends 'base.html' %}
{% block title %}{{ _('Tenant Dashboard') }} | REPT{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="bi bi-person-check"></i> {{ _('Welcome,') }} {{ current_user.full_name }}</h1>

<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-header bg-white fw-bold">
                <i class="bi bi-house-door"></i> {{ _('My Property') }}
            </div>
            <div class="card-body">
                {% if tenant.property %}
                    <p><strong>{{ _('Property Name:') }}</strong> {{ tenant.property.name }}</p>
                    <p><strong>{{ _('Address:') }}</strong> {{ tenant.property.address }}</p>
                    <p><strong>{{ _('Type:') }}</strong> {{ tenant.property.property_type }}</p>
                    <p><strong>{{ _('Unit:') }}</strong> {{ tenant.unit_number or _('N/A') }}</p>
                {% else %}
                    <p class="text-muted">{{ _('You are not assigned to a property yet.') }}</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-header bg-white fw-bold">
                <i class="bi bi-calendar-event"></i> {{ _('My Rent Due Info') }}
            </div>
            <div class="card-body">
                {% if tenant.due_day_of_month %}
                    <p><strong>{{ _('Rent Amount:') }}</strong> KSh {{ tenant.rent_amount }}</p>
                    <p><strong>{{ _('Due Every Month On:') }}</strong> {{ tenant.due_day_of_month }}</p>
                    <p><strong>{{ _('Grace Period:') }}</strong> {{ tenant.grace_period_days or 0 }} {{ _('days') }}</p>
                {% else %}
                    <p class="text-muted">{{ _('Rent details not configured yet.') }}</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="card shadow-sm">
            <div class="card-header bg-white fw-bold">
                <i class="bi bi-building-add"></i> {{ _('Available Properties for Leasing') }}
            </div>
            <div class="card-body p-0">
                {% if available_properties %}
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>{{ _('Name') }}</th>
                                <th>{{ _('Address') }}</th>
                                <th>{{ _('Type') }}</th>
                                <th>{{ _('Units Available') }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for prop in available_properties %}
                            <tr>
                                <td>{{ prop.name }}</td>
                                <td>{{ prop.address }}</td>
                                <td>{{ prop.property_type }}</td>
                                <td>{{ prop.units_available }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="p-3 text-muted text-center">{{ _('No available properties at the moment.') }}</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
